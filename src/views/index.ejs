<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>To do list</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>

<body>
    <%- include("partials/_header") %> <!-- Importa o cabeçalho -->

        <div class="container">
            <div class="text-center mt-5">
                <h1>Minhas tarefas</h1>
                <p class="lead">Organize seu dia de forma simples</p>

                <!-- Formulário para cadastrar tarefa -->
                <form action="/add" method="post" class="d-flex mb-4">
                    <input type="text" name="title" class="form-control me-2" placeholder="Digite uma nova tarefa..."
                        required>
                    <button type="submit" class="btn btn-primary">Adicionar</button>
                </form>

                <!-- Lista de tarefas -->
                <ul class="list-group">
                    <!-- Verifica se existe alguma tarefa -->
                    <% if (tasks.length===0) { %>
                        <li class="list-group-item">Nenhuma tarefa cadastrada</li>
                        <% } else { %>
                            <!-- Lista todas as tarefas -->
                            <% tasks.forEach(task=> { %>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <span style="text-decoration: <%= task.done ? 'line-through' : 'none' %>;">
                                        <%= task.title %>
                                    </span>
                                    <div>
                                        <!-- Marcar/desmarca uma tarefa -->
                                        <a href="/toggle/<%= task.id %>" class="btn btn-sm btn-warning me-2">
                                            <%= task.done ? "Desmarcar" : "Concluir" %>
                                        </a>
                                        <!-- Exclui uma tarefa -->
                                        <a href="/delete/<%= task.id %>" class="btn btn-sm btn-danger">
                                            Excluir
                                        </a>
                                    </div>
                                </li>
                            <% }) %>
                        <% } %>
                </ul>
            </div>
        </div>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
</body>

</html>